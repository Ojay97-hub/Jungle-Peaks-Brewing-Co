{% load static imgix_tags %}

<!doctype html>
<html lang="en">
<head>

    {% block meta %}
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- keywords -->
        <meta name="description" content="Explore Jungle Peaks Brewing's diverse selection of craft beers, including IPAs, lagers, stouts, and more. Discover our unique flavors and quality brewing process.">
        <meta name="keywords" content="Amazon craft brewery, Jungle Peaks Brewing, Amazon brewery tours, 
        Amazon beer tastings, beer education, beer experiences, taproom, IPA beer, Lager beer, 
        Stout beer, Wheat Beer, Pale Ale, Sour beer, Seasonal Ale, Light Beer, beer delivery, beer store, 
        buy beer online, craft beer gifts, best craft beer in Amazon">
        <meta name="author" content="Jungle Peaks Brewing">

        <meta property="og:title" content="Jungle Peaks Brewing">
        <meta property="og:description" content="Explore Jungle Peaks Brewing's diverse selection of craft beers, including IPAs, lagers, stouts, and more.">
        <meta property="og:image" content="{% imgix_url 'images/og-image.jpg' %}">
        <meta property="og:url" content="https://jungle-peaks-brewing-29d2cf7236c2.herokuapp.com/">
        <meta property="og:type" content="website">
    {% endblock %}

    {% block extra_meta %}
    {% endblock %}

    {% block corecss %}
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&family=Albert+Sans:wght@100..900&display=swap">
        <link rel="stylesheet" href="{% static 'css/base.css' %}">
    {% endblock %}

    {% block extra_css %}
    {% endblock %}

    {% block corejs %}
        <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

    {% endblock %}

    {% block extra_js %}
    {% endblock %}

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon-16x16.png'  %}">

    <title>Jungle Peaks Brewing {% block extra_title %}{% endblock %}</title>
    </head>

  <body>
<!-- Header --> 
<header class="site-header">
    <div id="delivery-banner" class="top-banner text-center" aria-live="polite">
        <p class="m-0">
            🚛 <a href="{% url 'products' %}" class="promo-link">Free delivery on orders over £{{ free_delivery_threshold }}! Order now!</a>
            <span id="countdown-desktop"></span>
        </p>
    </div>

    <div class="brand-area container">
        <a href="{% url 'home' %}" class="text-decoration-none" aria-label="Go to Jungle Peaks Brewing homepage">
            <span class="jungle-peaks-logo">
                <i data-lucide="mountain"></i> 
                <span class="logo-text">Jungle Peaks</span>
            </span>
        </a>

        {% if request.resolver_match.url_name == 'products' or request.resolver_match.url_name == 'product_detail' %}
            <div class="main-search-bar d-none d-md-flex" role="search">
                <form method="GET" action="{% url 'products' %}">
                    <input
                        type="search"
                        name="q"
                        value="{{ request.GET.q }}"
                        placeholder="Search for products"
                        aria-label="Search for products"
                    >
                    <button type="submit" class="btn btn-link" aria-label="Search">
                        <i data-lucide="search"></i>
                    </button>
                </form>
            </div>
        {% endif %}

        <div class="header-actions ms-auto">
            <button
                class="navbar-toggler d-lg-none"
                id="main-nav-toggle"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#secondary-nav"
                aria-controls="secondary-nav"
                aria-expanded="false"
                aria-label="Toggle navigation menu"
            >
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>

            <a class="header-action bag-action" href="{% url 'view_bag' %}" aria-label="View shopping bag">
                <div class="bag-icon">
                    <i data-lucide="shopping-bag"></i>
                    {% if bag_items %}
                        <span class="bag-count">{{ bag_items|length }}</span>
                    {% endif %}
                </div>
                <div class="bag-info">
                    <span class="bag-label">Bag</span>
                    <span class="bag-value">
                        {% if grand_total %}
                            £{{ grand_total|floatformat:2 }}
                        {% else %}
                            £0.00
                        {% endif %}
                    </span>
                </div>
            </a>

            <div class="dropdown">
                <a
                    class="header-action user-action"
                    href="#"
                    id="user-options"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                    aria-label="User account options"
                >
                    <div class="user-icon">
                        <i data-lucide="user"></i>
                    </div>
                    <div class="user-info">
                        <span class="user-label">Account</span>
                        {% if request.user.is_authenticated %}
                            <span class="user-name">{{ request.user.username }}</span>
                        {% endif %}
                    </div>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="user-options">
                    {% if request.user.is_authenticated %}
                        {% if request.user.is_superuser %}
                            <li><a href="{% url 'add_product' %}" class="dropdown-item">
                                <i data-lucide="settings"></i> Product Management
                            </a></li>
                        {% endif %}
                        <li><a href="{% url 'profile' %}" class="dropdown-item">
                            <i data-lucide="user-circle"></i> My Profile
                        </a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a href="{% url 'account_logout' %}" class="dropdown-item">
                            <i data-lucide="log-out"></i> Logout
                        </a></li>
                    {% else %}
                        <li><a href="{% url 'account_signup' %}" class="dropdown-item">
                            <i data-lucide="user-plus"></i> Register
                        </a></li>
                        <li><a href="{% url 'account_login' %}" class="dropdown-item">
                            <i data-lucide="log-in"></i> Login
                        </a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>

    <nav class="navbar navbar-secondary navbar-expand-lg" aria-label="Primary navigation">
        <div class="container">
            <div class="collapse navbar-collapse" id="secondary-nav">
                <ul class="nav flex-lg-row flex-column align-items-lg-center">
                    <li class="nav-item">
                        <a href="{% url 'home' %}" class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
                            <i data-lucide="home"></i>
                            <span>Home</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'products' %}" class="nav-link {% if request.resolver_match.url_name == 'products' or request.resolver_match.url_name == 'product_detail' %}active{% endif %}">
                            <i data-lucide="shopping-cart"></i>
                            <span>Shop</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'taproom' %}" class="nav-link {% if request.resolver_match.url_name == 'taproom' %}active{% endif %}">
                            <i data-lucide="beer"></i>
                            <span>Taproom</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'tours' %}" class="nav-link {% if request.resolver_match.url_name == 'tours' %}active{% endif %}">
                            <i data-lucide="map-pin"></i>
                            <span>Tours</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'contact:contact' %}" class="nav-link {% if request.resolver_match.url_name == 'contact' %}active{% endif %}">
                            <i data-lucide="mail"></i>
                            <span>Contact</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

    <main>
        {% if messages %}
        <div class="message-container" aria-live="polite" aria-atomic="true">
            {% for message in messages %}
            {% with message.level as level %}
            {% if level == 40 %}
            {% include 'includes/toasts/toast_error.html' %}
            {% elif level == 30 %}
            {% include 'includes/toasts/toast_warning.html' %}
            {% elif level == 25 %}
            {% include 'includes/toasts/toast_success.html' %}
            {% else %}
            {% include 'includes/toasts/toast_info.html' %}
            {% endif %}
            {% endwith %}
            {% endfor %}
        </div>
        {% endif %}

        {% block breadcrumbs %}{% endblock %}

        {% block page_header %}
        {% endblock %}

        {% block content %}
        {% endblock %}
    </main>

<!-- FOOTER SECTION -->
<footer class="footer py-5">
    <div class="container">
            <!-- Main Footer Content -->
            <div class="row justify-content-between">
              <!-- Newsletter Section -->
              <div class="col-md-4 mb-4">
                <h3 class="text-start fw-bold">Newsletter</h3>
                <p class="text-start">Sign up for our newsletter to stay updated on our latest brews and events.</p>
                <form action="{% url 'newsletter_signup' %}" method="POST" class="d-flex flex-column flex-sm-row gap-2 align-items-stretch" id="newsletter-form">
                    {% csrf_token %}
                    <input
                        type="email"
                        name="email"
                        id="email"
                        class="form-control"
                        placeholder="Enter your email"
                        required
                        aria-label="Enter your email to subscribe">
                  <button type="submit" class="btn btn-accent" aria-label="Subscribe to newsletter">
                        Subscribe
                    </button>
                </form>
            </div>
  
            <!-- Explore and Quick Links Section -->
              <div class="col-md-4">
                <div class="row">
                  <!-- Explore Section -->
                  <div class="col-6">
                    <h3 class="text-start fw-bold">Explore</h3>
                    <ul class="list-unstyled text-start">
                        <li><a href="{% url 'home' %}" class="text-white text-decoration-none" aria-label="Go to Home">Home</a></li>
                        <li><a href="{% url 'products' %}" class="text-white text-decoration-none" aria-label="Go to Shop">Shop</a></li>
                        <li><a href="{% url 'taproom' %}" class="text-white text-decoration-none" aria-label="Go to Taproom">Taproom</a></li>
                        <li><a href="{% url 'tours' %}" class="text-white text-decoration-none" aria-label="Go to Tours">Tours</a></li>
                    </ul>
                </div>
        
                  <!-- Quick Links Section -->
                  <div class="col-6">
                    <h3 class="text-start fw-bold">Quick Links</h3>
                    <ul class="list-unstyled text-start">
                        <li><a href="https://www.termsfeed.com/live/1c4b584c-86ce-43c1-9a8e-09e3d3f9f315" class="text-white text-decoration-none" aria-label="View Privacy Policy">Privacy Policy</a></li>
                        <li><a href="{% url 'contact:contact' %}" class="text-white text-decoration-none" aria-label="Contact Us">Contact Us</a></li>
                        <li><a href="{% url 'home' %}#about" class="text-white text-decoration-none" aria-label="Learn more About Us">About Us</a></li>
                        <li><a href="{% url 'contact:contact' %}#faqs" class="text-white text-decoration-none" aria-label="View FAQs">FAQs</a></li>
                    </ul>
                </div>
              </div>
            </div>
  
            <!-- Follow Us Section -->
            <div class="col-md-3 text-center">
                <h3 class="fw-bold">Follow Us</h3>
                <div class="d-flex justify-content-center gap-3 mt-3">
                    <a href="https://www.facebook.com/profile.php?id=61573268283619" target="_blank" rel="noopener" class="text-decoration-none" aria-label="Follow us on Facebook">
                        <i data-lucide="facebook"></i>
                    </a>
                    <a href="https://twitter.com" target="_blank"  rel="noopener" class="text-decoration-none" aria-label="Follow us on Twitter">
                        <i data-lucide="twitter"></i>
                    </a>
                    <a href="https://instagram.com" target="_blank" rel="noopener" class="text-decoration-none" aria-label="Follow us on Instagram">
                        <i data-lucide="instagram"></i>
                    </a>
                </div>
            </div>
        </div>
  
        <!-- Divider and Footer Bottom -->
        <hr class="text-white opacity-25 mt-4">
        <div class="text-center mt-3">
            <p class="mb-1">Jungle Peaks Brewing, 123 Craft Lane, Beer Town, BT 78910</p>
            <p>
                <a href="https://www.google.com/maps?q=AM-070%20-%20Iranduba,%20Manaus%20-%20AM,%2069405-000,%20Brazil"  
                    target="_blank" 
                    class="text-white text-decoration-none" 
                    aria-label="View Jungle Peaks Brewing location on Google Maps">
                    View in Google Maps
                </a>
            </p>
        </div>
    </div>
  </footer>
  

    <!-- Newsletter Interest Pop-up -->
    <div id="newsletter-popup" class="modal-overlay">
      <div class="modal-card">
          <h2 class="text-center fw-bold">🍻 Customise Your Subscription</h2>
          <p class="text-center">Select what you're most interested in:</p>

          <form id="interest-form">
              <input type="hidden" id="subscriber_id"> <!-- Store the subscriber ID -->

              <div class="checkbox-container">
                  <label class="checkbox-label">
                      <input type="checkbox" name="interest" value="beer"> 🍺 I'm a Beer Guy
                  </label>
                  <label class="checkbox-label">
                      <input type="checkbox" name="interest" value="food"> 🍔 I'm a Foodie
                  </label>
                  <label class="checkbox-label">
                      <input type="checkbox" name="interest" value="merch"> 👕 Give Me Your Merch
                  </label>
              </div>

              <div class="text-center mt-3">
                  <button type="submit" class="btn btn-success">Save Preferences</button>
                  <button type="button" id="close-popup" class="btn btn-secondary">Close</button>
              </div>
          </form>
      </div>
    </div>


{% block postloadjs %}
<script src="{% static 'js/newsletter.js' %}"></script>

<!-- Initialize Lucide Icons -->
<script>
    lucide.createIcons();
</script>

<!-- Stripe -->        
{% if request.resolver_match.url_name == 'checkout' %}
<script src="https://js.stripe.com/v3/"></script>
{% endif %}

<script>
    /* global bootstrap */
    
document.addEventListener("DOMContentLoaded", function () {
    var toastElements = document.querySelectorAll(".toast");
    toastElements.forEach(function (toastEl) {
        var toast = new bootstrap.Toast(toastEl);
        toast.show();
    });

    if (document.getElementById("countdown-desktop")) {
        startCountdown(24, "countdown-desktop");
    }
});

function startCountdown(hours, elementId){
    let now = new Date();
    let resetTime = new Date(now);
    resetTime.setHours(now.getHours() + hours, 0, 0, 0);

    function updateCountdown() {
        let currentTime = new Date();
        let remainingTime = resetTime - currentTime;

        if (remainingTime <= 0) {
            resetTime.setHours(resetTime.getHours() + hours, 0, 0, 0);
            remainingTime = resetTime - currentTime;
        }

        let seconds = Math.floor((remainingTime / 1000) % 60);
        let minutes = Math.floor((remainingTime / 1000 / 60) % 60);
        let hoursLeft = Math.floor((remainingTime / 1000 / 60 / 60));

        let countdownElement = document.getElementById(elementId);
        if (countdownElement) {
            countdownElement.innerHTML = `Offer ends in: ${hoursLeft}h ` +
                             `${minutes}m ${seconds}s`;
        }

        setTimeout(updateCountdown, 1000);
    }

    updateCountdown();
}

document.addEventListener("DOMContentLoaded", function () {
    let lastScrollTop = 0;
    const header = document.querySelector(".site-header");

    window.addEventListener("scroll", function () {
        let scrollTop = window.pageYOffset ||
        document.documentElement.scrollTop;

        if (scrollTop > lastScrollTop) {
            // Scrolling down → Hide header
            header.classList.add("hidden-header");
        } else {
            // Scrolling up → Show header
            header.classList.remove("hidden-header");
        }

        lastScrollTop = scrollTop;
    });
});
</script>
{% endblock %}

    </body>
</html>


 
